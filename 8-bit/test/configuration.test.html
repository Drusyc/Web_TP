#{fixture delete:'all', load:'configuration.test.yml' /}

*{ You can use plain selenium command using the selenium tag }*

#{selenium}
    clearSession()

    // Open the home page, and check that no error occured
    open('/')

    //Check title
    assertTitle('Bienvenue sur 8-bit !')

    //login
    type(username, GamerSeleniumTest)
    type(password, password)
    clickAndWait(name=login-button)
    waitForElementPresent(//h1)
    assertTextPresent('Bienvenue sur 8-bit GamerSeleniumTest !')

    //Ouvre Configuration/index.html la gestion des configs
    clickAndWait(link=Configuration système)
    assertTitle('Configuration système')
    assertTextPresent('Configuration système')
    verifyElementPresent(add-configuration)
    verifyElementPresent(configurations)

    //Vérifie que la configuration du joueur est bien affichée
    verifyTextPresent('conf-GamerSeleniumTest-asus')
    //Windows 7
    verifyTextPresent('Windows - SeleniumTest 7')
    //RAM
    verifyTextPresent('4.0 Go')
    //espace mémoire
    verifyTextPresent('500.0 Go')
    //processeur
    verifyTextPresent('Intel i7-3517U - SeleniumTest')
    //carte vidéo
    verifyTextPresent('NVIDIA GeForce GT 635M - SeleniumTest')

    //Ouvre la popup d'ajout de configuration
    click(add-configuration)
    verifyElementPresent(configuration-form)

    //Ajout d'un configuration
    type(name, conf-msi-GE60 - SeleniumTest)
    type(free-disk-space, '1000.0')
    type(ram, '8.0')
    select(operating-system, Windows - SeleniumTest 8)
    select(processor, Intel i7-4710HQ - SeleniumTest)
    select(video-card, NVIDIA GeForce GTX 850M - SeleniumTest)
	click(name=conf-submit)

    //Vérifie que la configuration a bien été ajouté
    waitForPageToLoad(5000)
    waitForElementPresent(configurations)
    verifyTextPresent('conf-msi-GE60 - SeleniumTest')
    //Windows 8
    verifyTextPresent('Windows - SeleniumTest 8')
    //RAM
    verifyTextPresent('8.0 Go')
    //espace mémoire
    verifyTextPresent('1000.0 Go')

#{/selenium}

#{fixture delete:'all' /}